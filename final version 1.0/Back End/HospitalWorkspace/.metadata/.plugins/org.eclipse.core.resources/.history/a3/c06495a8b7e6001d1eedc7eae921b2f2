package com.hospital.controller;

import java.util.List;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RestController;

import com.hospital.externalservice.SMSService;
import com.hospital.model.Hospital;
import com.hospital.repository.HospitalRepository;
import com.hospital.service.HospitalService;


@RestController
public class HospitalController {
	
	@Autowired
	HospitalRepository hospitalRepo;
	
	@Autowired
	HospitalService hospitalService;
	
	@Autowired
	SMSService externalSmsService;
	
	@GetMapping("/patient")
	public List<Hospital> getPatient()
	{
		return hospitalService.getPatient(); 
	}
	
	@GetMapping("/getPatientByContactNo")
	public Hospital getPatientByContactNo(@RequestBody String contactNo)
	{
		return hospitalRepo.getPatientByContactNo(contactNo) ;
	}
	
	@PostMapping("/patient")
	public Hospital addPatient(@RequestBody Hospital hospital)
	{
		return hospitalService.addPatient(hospital);
	}
	
	@PostMapping("/sendsms")
	public String callSMSService()
	{
		return externalSmsService.callSMSService();
	}
}
