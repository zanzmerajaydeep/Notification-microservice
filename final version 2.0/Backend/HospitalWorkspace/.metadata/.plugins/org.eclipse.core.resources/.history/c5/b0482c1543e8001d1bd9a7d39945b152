package com.hospital.controller;

import java.util.List;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.CrossOrigin;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RestController;

import com.hospital.externalservice.SMSService;
import com.hospital.model.Hospital;
import com.hospital.service.HospitalService;
import com.hospital.service.HospitalServiceImpl;

@RestController

public class HospitalController {
	
	@Autowired
	HospitalServiceImpl hospitalServiceImlp;
	
	@Autowired
	HospitalService hospitalService;
	
	@Autowired
	SMSService externalSmsService;
	
	@GetMapping("/getAllPatient")
	public List<Hospital> getPatient()
	{
		return hospitalService.getPatient(); 
	}
	
	@GetMapping("/getPatientByConatctNo")
	public Hospital getPatientByConatctNo(@RequestBody String conatctNo)
	{
		return hospitalServiceImlp.getPatientByContactNo(conatctNo); 
	}
	
	@PostMapping("/patient")
	public Hospital addPatient(@RequestBody Hospital hospital)
	{
		return hospitalService.addPatient(hospital);
	}
	
	@PostMapping("/sendsms")
	public  List<ResponseEntity<String>> callSMSService()
	{
		return externalSmsService.callSMSService();
	}
	
	@GetMapping("/callSMSServiceByContactNo")
	public ResponseEntity<String> callSMSServiceByContactNo(@RequestBody String ConatctNo)
	{
		return externalSmsService.callSMSServiceByContactNo(ConatctNo); 
	}
}
